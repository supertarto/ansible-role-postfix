---
- name: Define postfix hostname
  ansible.builtin.debconf:
    name: postfix
    question: "postfix/mailname"
    value: "{{ postfix_hostname }}"
    vtype: "string"

- name: Define postfix main_mailer_type
  ansible.builtin.debconf:
    name: postfix
    question: "postfix/main_mailer_type"
    value: "{{ postfix_main_mailer_type }}"
    vtype: "string"

- name: Define Postfix Relayhost
  ansible.builtin.debconf:
    name: postfix
    question: "postfix/relayhost"
    value: "{{ postfix_smtp }}"
    vtype: "string"
  when: postfix_smtp is defined

- name: Install Postfix package
  ansible.builtin.package:
    name: postfix
    state: present
